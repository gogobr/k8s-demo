apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: {{ include "spring-boot-app.fullname" . }}-monitor
  namespace: monitoring   # å»ºè®®æ”¾åœ¨ç›‘æ§å‘½åç©ºé—´
  labels:
    release: monitor      # ğŸ‘ˆ å¿…é¡»åŠ ï¼è¿™æ˜¯ Prometheus Operator çš„é»˜è®¤é€‰æ‹©å™¨
    app: {{ include "spring-boot-app.fullname" . }}
spec:
  selector:
    matchLabels:
      app: {{ include "spring-boot-app.fullname" . }}  # ğŸ‘ˆ å¿…é¡»å’Œ Service çš„ label ä¸€è‡´
  namespaceSelector:
    matchNames:
      - {{ .Release.Namespace }}           # ğŸ‘ˆ ä½ çš„åº”ç”¨åœ¨ default å‘½åç©ºé—´
  endpoints:
    - port: http          # ğŸ‘ˆ å¯¹åº” Service é‡Œçš„ name: http
      path: /actuator/prometheus
      interval: 15s